window.onload=function(){console.log("location.pathname",location.pathname);if(location.pathname==="/fi"||location.pathname==="/en"){var a=io();var b;a.on("message",function(f){var d=JSON.parse(f);if(d.news.length>0&&b!==d.news[0].id){for(var c=4;c>=0;c--){if(document.getElementById(d.news[c].id)===null){var e=makeNode(d,c);prepend(e)}}b=d.news[0].id}d,e=null})}};var prepend=function(b){var a=document.getElementById("news-container");a.insertBefore(b,a.firstChild);a.removeChild(a.lastChild)};var makeNode=function(e,d){var h=document.createElement("div");h.setAttribute("class","item new");var j=document.createElement("div");j.setAttribute("class","source");j.innerHTML=e.news[d].rssSource;var c=document.createElement("div");c.setAttribute("class","date");c.innerHTML=moment(e.news[d].pubDate).format("DD.MM. HH:mm");var g=document.createElement("div");g.setAttribute("class","link");var f=document.createElement("div");f.setAttribute("class","category");f.innerHTML=location.pathname.indexOf("/en")>=0?e.news[d].category.categoryEnName:e.news[d].category.categoryName;var b=document.createElement("a");b.setAttribute("id",e.news[d].id);b.setAttribute("href",e.news[d].rssLink);b.setAttribute("target","_blank");b.innerHTML=e.news[d].rssTitle;g.appendChild(b);h.appendChild(c);h.appendChild(j);h.appendChild(f);h.appendChild(g);return h};